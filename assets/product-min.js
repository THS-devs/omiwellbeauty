!function(){var t={673:function(){customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.variantIdInput.disabled=!1,this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),this.submitButton=this.querySelector('[type="submit"]'),this.submitButtonText=this.submitButton.querySelector("span"),document.querySelector("cart-drawer")&&this.submitButton.setAttribute("aria-haspopup","dialog"),this.hideErrors="true"===this.dataset.hideErrors}onSubmitHandler(t){if(t.preventDefault(),"true"===this.submitButton.getAttribute("aria-disabled"))return;this.handleErrorMessage(),this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.classList.add("loading"),this.querySelector(".loading__spinner").classList.remove("hidden");const e=fetchConfig("javascript");e.headers["X-Requested-With"]="XMLHttpRequest",delete e.headers["Content-Type"];const r=new FormData(this.form);this.cart&&(r.append("sections",this.cart.getSectionsToRender().map((t=>t.id))),r.append("sections_url",window.location.pathname),this.cart.setActiveElement(document.activeElement)),e.body=r,fetch(`${routes.cart_add_url}`,e).then((t=>t.json())).then((t=>{if(t.status){this.handleErrorMessage(t.description);const e=this.submitButton.querySelector(".sold-out-message");if(!e)return;return this.submitButton.setAttribute("aria-disabled",!0),this.submitButtonText.classList.add("hidden"),e.classList.remove("hidden"),void(this.error=!0)}if(!this.cart)return void(window.location=window.routes.cart_url);this.error=!1;const e=this.closest("quick-add-modal");e?(document.body.addEventListener("modalClosed",(()=>{setTimeout((()=>{this.cart.renderContents(t)}))}),{once:!0}),e.hide(!0)):this.cart.renderContents(t)})).catch((t=>{console.error(t)})).finally((()=>{this.submitButton.classList.remove("loading"),this.cart&&this.cart.classList.contains("is-empty")&&this.cart.classList.remove("is-empty"),this.error||this.submitButton.removeAttribute("aria-disabled"),this.querySelector(".loading__spinner").classList.add("hidden")}))}handleErrorMessage(t=!1){this.hideErrors||(this.errorMessageWrapper=this.errorMessageWrapper||this.querySelector(".product-form__error-message-wrapper"),this.errorMessageWrapper&&(this.errorMessage=this.errorMessage||this.errorMessageWrapper.querySelector(".product-form__error-message"),this.errorMessageWrapper.toggleAttribute("hidden",!t),t&&(this.errorMessage.textContent=t)))}toggleSubmitButton(t=!0,e){t?(this.submitButton.setAttribute("disabled","disabled"),e&&(this.submitButtonText.textContent=e)):(this.submitButton.removeAttribute("disabled"),this.submitButtonText.textContent=window.variantStrings.addToCart)}get variantIdInput(){return this.form.querySelector("[name=id]")}})},480:function(){customElements.get("product-info")||customElements.define("product-info",class extends HTMLElement{quantityInput=void 0;quantityForm=void 0;onVariantChangeUnsubscriber=void 0;cartUpdateUnsubscriber=void 0;abortController=void 0;pendingRequestUrl=null;preProcessHtmlCallbacks=[];postProcessHtmlCallbacks=[];constructor(){super(),this.quantityInput=this.querySelector(".quantity__input")}addPreProcessCallback(t){this.preProcessHtmlCallbacks.push(t)}initQuantityHandlers(){this.quantityInput&&(this.quantityForm=this.querySelector(".product-form__quantity"),this.quantityForm&&(this.setQuantityBoundries(),this.dataset.originalSection||(this.cartUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,this.fetchQuantityRules.bind(this)))))}initializeProductSwapUtility(){this.preProcessHtmlCallbacks.push((t=>t.querySelectorAll(".scroll-trigger").forEach((t=>t.classList.add("scroll-trigger--cancel"))))),this.postProcessHtmlCallbacks.push((t=>{window?.Shopify?.PaymentButton?.init(),window?.ProductModel?.loadShopifyXR()}))}handleOptionValueChange({data:{event:t,target:e,selectedOptionValues:r}}){if(!this.contains(t.target))return;this.resetProductFormState();const i=e.dataset.productUrl||this.pendingRequestUrl||this.dataset.url;this.pendingRequestUrl=i;const s=this.dataset.url!==i,a="true"===this.dataset.updateUrl&&s;this.renderProductInfo({requestUrl:this.buildRequestUrlWithParams(i,r,a),targetId:e.id,callback:s?this.handleSwapProduct(i,a):this.handleUpdateProductInfo(i)})}resetProductFormState(){const t=this.productForm;t?.toggleSubmitButton(!0),t?.handleErrorMessage()}handleSwapProduct(t,e){return r=>{this.productModal?.remove();const i=e?"product-info[id^='MainProduct']":"product-info",s=this.getSelectedVariant(r.querySelector(i));this.updateURL(t,s?.id),e?(document.querySelector("head title").innerHTML=r.querySelector("head title").innerHTML,HTMLUpdateUtility.viewTransition(document.querySelector("main"),r.querySelector("main"),this.preProcessHtmlCallbacks,this.postProcessHtmlCallbacks)):HTMLUpdateUtility.viewTransition(this,r.querySelector("product-info"),this.preProcessHtmlCallbacks,this.postProcessHtmlCallbacks)}}renderProductInfo({requestUrl:t,targetId:e,callback:r}){this.abortController?.abort(),this.abortController=new AbortController,fetch(t,{signal:this.abortController.signal}).then((t=>t.text())).then((t=>{this.pendingRequestUrl=null;const e=(new DOMParser).parseFromString(t,"text/html");r(e)})).then((()=>{document.querySelector(`#${e}`)?.focus()})).catch((t=>{"AbortError"===t.name?console.log("Fetch aborted by user"):console.error(t)}))}getSelectedVariant(t){const e=t.querySelector("variant-selects [data-selected-variant]")?.innerHTML;return e?JSON.parse(e):null}buildRequestUrlWithParams(t,e,r=!1){const i=[];return!r&&i.push(`section_id=${this.sectionId}`),e.length&&i.push(`option_values=${e.join(",")}`),`${t}?${i.join("&")}`}updateOptionValues(t){const e=t.querySelector("variant-selects");e&&HTMLUpdateUtility.viewTransition(this.variantSelectors,e,this.preProcessHtmlCallbacks)}handleUpdateProductInfo(t){return e=>{const r=this.getSelectedVariant(e);if(this.pickupAvailability?.update(r),this.updateOptionValues(e),this.updateURL(t,r?.id),this.updateVariantInputs(r?.id),!r)return void this.setUnavailable();this.updateMedia(e,r?.featured_media?.id);const i=(t,r=(t=>!1))=>{const i=e.getElementById(`${t}-${this.sectionId}`),s=this.querySelector(`#${t}-${this.dataset.section}`);i&&s&&(s.innerHTML=i.innerHTML,s.classList.toggle("hidden",r(i)))};i("price"),i("Sku",(({classList:t})=>t.contains("hidden"))),i("Inventory",(({innerText:t})=>""===t)),i("Volume"),i("Price-Per-Item",(({classList:t})=>t.contains("hidden"))),this.updateQuantityRules(this.sectionId,e),this.querySelector(`#Quantity-Rules-${this.dataset.section}`)?.classList.remove("hidden"),this.querySelector(`#Volume-Note-${this.dataset.section}`)?.classList.remove("hidden"),this.productForm?.toggleSubmitButton(e.getElementById(`ProductSubmitButton-${this.sectionId}`)?.hasAttribute("disabled")??!0,window.variantStrings.soldOut),publish(PUB_SUB_EVENTS.variantChange,{data:{sectionId:this.sectionId,html:e,variant:r}})}}updateVariantInputs(t){this.querySelectorAll(`#product-form-${this.dataset.section}, #product-form-installment-${this.dataset.section}`).forEach((e=>{const r=e.querySelector('input[name="id"]');r.value=t??"",r.dispatchEvent(new Event("change",{bubbles:!0}))}))}updateURL(t,e){this.querySelector("share-button")?.updateUrl(`${window.shopUrl}${t}${e?`?variant=${e}`:""}`),"false"!==this.dataset.updateUrl&&window.history.replaceState({},"",`${t}${e?`?variant=${e}`:""}`)}setUnavailable(){this.productForm?.toggleSubmitButton(!0,window.variantStrings.unavailable);const t=["price","Inventory","Sku","Price-Per-Item","Volume-Note","Volume","Quantity-Rules"].map((t=>`#${t}-${this.dataset.section}`)).join(", ");document.querySelectorAll(t).forEach((({classList:t})=>t.add("hidden")))}updateMedia(t,e){if(!e)return;const r=this.querySelector("media-gallery ul"),i=t.querySelector("media-gallery ul"),s=()=>{this.hasAttribute("data-zoom-on-hover")&&enableZoomOnHover(2);const t=Array.from(r.querySelectorAll("li[data-media-id]")),e=new Set(t.map((t=>t.dataset.mediaId))),i=new Map(t.map(((t,e)=>[t.dataset.mediaId,{item:t,index:e}])));return[t,e,i]};if(r&&i){let[t,e,a]=s();const n=Array.from(i.querySelectorAll("li[data-media-id]")),o=new Set(n.map((({dataset:t})=>t.mediaId)));let u=!1;for(let t=n.length-1;t>=0;t--)e.has(n[t].dataset.mediaId)||(r.prepend(n[t]),u=!0);for(let e=0;e<t.length;e++)o.has(t[e].dataset.mediaId)||(t[e].remove(),u=!0);u&&([t,e,a]=s()),n.forEach(((i,n)=>{const o=a.get(i.dataset.mediaId);o&&o.index!==n&&(r.insertBefore(o.item,r.querySelector(`li:nth-of-type(${n+1})`)),[t,e,a]=s())}))}this.querySelector("media-gallery")?.setActiveMedia?.(`${this.dataset.section}-${e}`,!0);const a=this.productModal?.querySelector(".product-media-modal__content"),n=t.querySelector("product-modal .product-media-modal__content");a&&n&&(a.innerHTML=n.innerHTML)}setQuantityBoundries(){const t={cartQuantity:this.quantityInput.dataset.cartQuantity?parseInt(this.quantityInput.dataset.cartQuantity):0,min:this.quantityInput.dataset.min?parseInt(this.quantityInput.dataset.min):1,max:this.quantityInput.dataset.max?parseInt(this.quantityInput.dataset.max):null,step:this.quantityInput.step?parseInt(this.quantityInput.step):1};let e=t.min;const r=null===t.max?t.max:t.max-t.cartQuantity;null!==r&&(e=Math.min(e,r)),t.cartQuantity>=t.min&&(e=Math.min(e,t.step)),this.quantityInput.min=e,r?this.quantityInput.max=r:this.quantityInput.removeAttribute("max"),this.quantityInput.value=e,publish(PUB_SUB_EVENTS.quantityUpdate,void 0)}fetchQuantityRules(){const t=this.productForm?.variantIdInput?.value;t&&(this.querySelector(".quantity__rules-cart .loading__spinner").classList.remove("hidden"),fetch(`${this.dataset.url}?variant=${t}&section_id=${this.dataset.section}`).then((t=>t.text())).then((t=>{const e=(new DOMParser).parseFromString(t,"text/html");this.updateQuantityRules(this.dataset.section,e)})).catch((t=>console.error(t))).finally((()=>this.querySelector(".quantity__rules-cart .loading__spinner").classList.add("hidden"))))}updateQuantityRules(t,e){if(!this.quantityInput)return;this.setQuantityBoundries();const r=e.getElementById(`Quantity-Form-${t}`),i=[".quantity__input",".quantity__rules",".quantity__label"];for(let t of i){const e=this.quantityForm.querySelector(t),i=r.querySelector(t);if(e&&i)if(".quantity__input"===t){const t=["data-cart-quantity","data-min","data-max","step"];for(let r of t){const t=i.getAttribute(r);null!==t?e.setAttribute(r,t):e.removeAttribute(r)}}else e.innerHTML=i.innerHTML}}get productForm(){return this.querySelector("product-form")}get productModal(){return document.querySelector(`#ProductModal-${this.dataset.section}`)}get pickupAvailability(){return this.querySelector("pickup-availability")}get variantSelectors(){return this.querySelector("variant-selects")}get relatedProducts(){const t=SectionId.getIdForSection(SectionId.parseId(this.sectionId),"related-products");return document.querySelector(`product-recommendations[data-section-id^="${t}"]`)}get quickOrderList(){const t=SectionId.getIdForSection(SectionId.parseId(this.sectionId),"quick_order_list");return document.querySelector(`quick-order-list[data-id^="${t}"]`)}get sectionId(){return this.dataset.originalSection||this.dataset.section}})}},e={};function r(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";r(673),r(480)}()}();